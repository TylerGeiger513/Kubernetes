apiVersion: skaffold/v4beta6
kind: Config
metadata:
  name: campus-connect

build:
  artifacts:
    - image: campus-connect-backend
      context: .
      docker:
        dockerfile: Dockerfile.backend.prod
    - image: campus-connect-frontend
      context: .
      docker:
        dockerfile: Dockerfile.frontend.prod

deploy:
  helm:
    releases:
      - name: campus-connect
        chartPath: ./helm
        valuesFiles:
          - ./helm/values.prod.yaml

profiles:
  - name: dev
    deploy:
      helm:
        releases:
          - name: campus-connect
            chartPath: ./helm
            valuesFiles:
              - ./helm/values.prod.yaml
  - name: prod
    deploy:
      helm:
        releases:
          - name: campus-connect
            chartPath: ./helm
            valuesFiles:
              - ./helm/values.prod.yaml
